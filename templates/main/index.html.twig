{% extends 'base.html.twig' %}

{% block title %}Accueil
{% endblock %}

{% block body %}

	<!-- Hero section -->
	<section class="hero-section ">
		<div class="container">
			<div class="hero-text">
				<h2>WeSport</h2>
				<h2>Trouvez vos coéquipiers et vos adversaires facilement</h2>

			</div>
		</div>
	</section>
	<!-- Hero section end -->

	<section id="search_section">
		<div class="d-flex justify-content-center m-2 row">
			<h2 class="search-title">Rechercher des partenaires de sport</h2>
		</div>
		<div class="container">
			{{form_start(form, {'action': path('sportresearch'), 'method': 'POST'})}}
			<div class="row">
				<div class="col-lg-12">
					<div class="row">
						<div class="col-lg-3 col-md-3 col-sm-12 p-0">
							{{form_row(form.departement)}}
						</div>
						<div class="col-lg-3 col-md-3 col-sm-12 p-0">
							{{form_row(form.city)}}
						</div>
						<div class="col-lg-3 col-md-3 col-sm-12 p-0">
							{{form_row(form.sport)}}
						</div>
						<div class="col-lg-3 col-md-3 col-sm-12 p-0">
							{{form_row(form.level)}}
						</div>
					</div>
				</div>
			</div>
			{{form_end(form)}}
		</section>
		<!-- last registred user section -->
		<section id="result_section">
			<div class="container mt-5">
				<div class="d-flex justify-content-center m-4 row ">
					<h2 class="search-title">Les derniers inscrits</h2>
				</div>
				{% for user in lastUserRegistred %}
					<div class="row mb-4 justify-content-center" id="result_content">
						<div class="col-md-12">
							<div class="card search-card">
								<div class="card-body">
									<div class="row ">
										<div class="col-md-3 ">
											{% if user.profileImage is empty %}
												<img class="search-image" src="{{ asset('assets/img/avatar.svg') }}" alt=""/>
											{% else %}
												<img class="search-image" src="{{ asset('uploads/usersProfileImages/' ~ user.profileImage) }}" alt=""/>
											{% endif %}
										</div>
										<div class="col-md-5" id="profil_information">
											<h3 id="username">{{user.username}}</h3>
											{% if user.age %}
												<p id="age">,{{user.age}}ans</p>
											{% endif %}
											<p id="city">{{user.city}}</p>
											<p>
												{% for sportList in user.favoriteSports%}
													{{sportList.sport.name}}
													{% if not loop.last %},
													{% endif %}
												{% endfor %}
											</p>

											<button type="button" class="btn btn-secondary btn-sm btn-block">Voir profile</button>
										</div>
										<div class="col-md-4">
											<h6></h6>
											<div class="sub-row">
												<p class="description">{{user.description}}</p>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				{% endfor %}
			</div>
		</section>
		<!-- last registred user section end-->

		<!-- Event section -->
		<section class="events-section">
			<div class="events-container">
				<div class="section-title text-center">
					<h2>Les Prochains Evénéments</h2>
				</div>
				<div class="row">
					{% for event in lastEvent %}
						<div class="col-lg-4 col-sm-6 mb-4">
							<div class="event-item">
								<div class="event-pic">
									<h3>{{event.sportConcerned}}</h3>
									<img src="{{asset( 'https://picsum.photos/200/300?random=' ~ random(1, 100))}}" alt="">
								</div>
								<div class="event-content">
									<h4>{{event.title}}</h4>
									<p class="event-body">{{event.eventBody}}</p>
									<p>Lieu:
										{{event.location}}</p>
									<p>Date:
										{{event.eventDate|date("d/m/Y")}}</p>
								</div>
							</div>
						</div>
					{% endfor %}
				</div>
			</div>
		</section>
		<!-- Event section end -->

		<!-- ClassifiedAds section-->
		<section class="classifiedAds-section">
			<div class="ads-container">
				<div class="section-title text-center">
					<h2>Les Nouvelles anonces</h2>
				</div>
				<div class="row row-cols-2">
					{% for classifiedAd in lastClassifiedAds %}
						<div class="col-lg-6 row col-md-12">
							<div class="col-4 classifiedAdImg">
								<img src="{{asset('https://picsum.photos/260/170?random=' ~ random(1, 100))}}" alt="">
							</div>
							<div class="col-8 adsBody">
								<div class="d-flex justify-content-center">
									<h3>{{classifiedAd.title}}</h3>
								</div>
								<p class="d-inline-block">
									{{classifiedAd.classifiedAdBody}}
								</p>
								<div class="d-flex justify-content-end">
									<p>Publiée par
										{{classifiedAd.author}}
										le
										{{classifiedAd.createdAt|format_datetime('full','none',locale='fr')}}</p>
								</div>
							</div>
						</div>
					{% endfor %}
				</div>
			</div>
		</section>
		<!-- ClassifiedAds section end-->

		<!-- Template section -->

		<template id="templateResult">
			<div class="row mb-4 justify-content-center" id="result_content">
				<div class="col-md-12">
					<div class="card search-card">
						<div class="card-body">
							<div class="row ">
								<div class="col-md-3">
									<img class="search-image" width="200px" src=" {{asset('assets/img/avatar.svg')}} " alt=" ">
								</div>
								<div class="col-md-5" id="profil_information">
									<h3 id="username">username</h3>
									<p id="age">âge</p>
									<p id="city">ville</p>
								</div>
								<div class="col-md-4">
									<h6></h6>
									<div class="sub-row">
										<button type="button" class="btn btn-secondary btn-sm btn-block">Voir profile</button>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</template>

		<!-- Template section end -->
	{% endblock %}
